<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
        
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.debug.js"></script>
	
	
    
        <script>
	        function calculateTotal() {
	            var total = 0;
	            var rows = document.getElementById('invoiceTable').rows;
	            for (var i = 1; i < rows.length; i++) {
	                var quantity = parseFloat(rows[i].cells[2].children[0].value);
	                var price = parseFloat(rows[i].cells[3].children[0].value);
	                if (!isNaN(quantity) && !isNaN(price)) {
	                    var subtotal = quantity * price;
	                    rows[i].cells[4].children[0].value = subtotal.toFixed(2);
	                    total += subtotal;
	                }
	            }
	            document.getElementById('totalAmount').value = total.toFixed(2);
	            return false;  // Prevent form submission
	        }
	    </script>
    
    <!-- Custom styles -->
    <style>
        body {
            background-image: url('https://c0.wallpaperflare.com/path/839/207/808/capsule-cure-dosage-dose-7817ab0fc0e92d294ea90c6c77af9c16.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            background-opacity: 0.905;
            font-family: Arial, sans-serif;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }
        .btn-primary {
            background-color: #000;
            border: none;
            font-weight: bold;
        }
        .btn-primary:hover {
            background-color: #111;
        }
        .logo {
            max-width: 100px;
        }
        h1 {
            font-size: 24px;
            font-weight: bold;
        }
        th {
            font-weight: bold;
            text-align: center;
        }
        
		
	    .navbar-custom {
	        background-color: #111;
	    }
	    .navbar-custom .navbar-brand,
	    .navbar-custom .nav-link {
	        color: #5a5a5a;
	        text-decoration: none;
	    }
	    
	    .navbar-custom .nav-link:hover {
	        color: #0056b3;
	    }
	    a:hover{
	    	color: #0056b3;
	    }
	    
	    .btn-left {
		  float: left;
		}
    </style>
</head>
<body>
    
    	<nav class="navbar navbar-expand-lg navbar-custom">
		    <div class="container-fluid">
		        <a class="navbar-brand" href="#">+PharmaPlus+</a>
		        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
		            <span class="navbar-toggler-icon"></span>
		        </button>
		        <div class="collapse navbar-collapse" id="navbarNav">
		            <ul class="navbar-nav">
		                <li class="nav-item">
		                    <a class="nav-link" href="/"><i class="glyphicon glyphicon-home"></i> Home</a>
		                </li>
		                <li>   <li>
		                <li class="nav-item">
		                    <a class="nav-link" href="/stock"><i class="glyphicon glyphicon-th-large"></i> Stock</a>
		                </li>
		                <li class="nav-item">
		                    <a class="nav-link" href="/supplier"><i class="fas fa-handshake"></i> Supplier</a>
		                </li>		                
		                
		                
		                <li class="nav-item">
		                    <a class="nav-link active" aria-current="page" href="/invoice"><i class="fas fa-file-invoice"></i> Bill</a>
		                </li>
		                <li class="nav-item">
					        <a class="nav-link" href="/expert"><i class="fas fa-user-friends"></i> Ask Expert</a>
				        </li>
		                <li class="nav-item">
		                    <a class="nav-link" href="/info"><i class="fas fa-info-circle"></i> About Us</a>
		                </li>
		            </ul>
		        </div>
		    </div>
		</nav>
		
	    <div class="container">
	        <img src="https://seeklogo.com/images/P/pharmacy-logo-4729C66E18-seeklogo.com.png" alt="Pharmacy Logo" class="logo"> <!-- Add your logo image -->
	        <h1 class="text-center my-4">Bill Calculation</h1>
	        
	        <form onsubmit="return calculateTotal()">
	        <div class="mb-3 row">
	            <label for="customerName" class="col-sm-4 col-form-label">Customer Name:</label>
	            <div class="col-sm-8">
	                <input type="text" id="customerName" name="customerName" class="form-control">
	            </div>
	        </div>
	        <div class="mb-3 row">
			    <label for="customerContact" class="col-sm-4 col-form-label">Customer Contact:</label>
			    <div class="col-sm-8">
			        <input type="text" id="customerContact" name="customerContact" class="form-control">
			    </div>
			</div>
			
			<div class="mb-3 row">
			    <label for="customerAddress" class="col-sm-4 col-form-label">Customer Address:</label>
			    <div class="col-sm-8">
			        <input type="text" id="customerAddress" name="customerAddress" class="form-control">
			    </div>
			</div>
			
			<div class="mb-3 row">
			    <label for="customerAge" class="col-sm-4 col-form-label">Customer Age:</label>
			    <div class="col-sm-8">
			        <input type="number" id="customerAge" name="customerAge" class="form-control">
			    </div>
			</div>
			
			<div class="mb-3 row">
			    <label for="customerGender" class="col-sm-4 col-form-label">Customer Gender:</label>
			    <div class="col-sm-8">
			        <select id="customerGender" name="customerGender" class="form-control">
		        		<option value="">Select Gender</option>
			            <option value="male">Male</option>
			            <option value="female">Female</option>
			            <option value="other">Other</option>
			        </select>
            	</div>
		   	</div>
	        <!-- More fields... -->
	        <table id="invoiceTable" class="table">
	            <thead>
	                <tr>
	                    <th>Drug ID</th>
	                    <th>Drug Name</th>
	                    <th>Quantity</th>
	                    <th>Price</th>
	                    <th>Total</th>
	                </tr>
	            </thead>
	            <tbody>
	                <tr>
	                    <td><input type="text" id="drugId1" name="drugId1" class="form-control"></td>
	                    <td><input type="text" id="drugName1" name="drugName1" class="form-control"></td>
	                    <td><input type="number" id="quantity1" name="quantity1" class="form-control"></td>
	                    <td><input type="number" step="0.01" id="price1" name="price1" class="form-control"></td>
	                    <td><input type="number" step="0.01" id="total1" name="total1" class="form-control" readonly></td>
	                    <td><button type="button" onclick="deleteRow(this)" class="btn btn-danger">
	                    	<i class="glyphicon glyphicon-trash"></i>
	                    </button></td>
	                </tr>
	                <!-- More rows as needed -->
	            </tbody>
	        </table>
	        <br>
	        <button type="button" onclick="addRow()" class="btn btn-secondary btn-left">Add Drug</button>
	        <br><br>
	        <div class="mb-3 row">
	            <label for="totalAmount" class="col-sm-4 col-form-label">Total Amount:</label>
	            <div class="col-sm-8">
	                <input type="number" step="0.01" id="totalAmount" name="totalAmount" class="form-control" readonly>
	            </div>
	        </div>
	        <br>
	        <button type="submit" class="btn btn-secondary">Calculate</button>
	        <button type="submit" onclick="genBill()" class="btn btn-secondary">Generate Bill</button>
	        
	    </form>
	    <script>
	        function addRow() {
		        var table = document.getElementById('invoiceTable');
		        var row = table.insertRow(-1);
		        var cell1 = row.insertCell(0);
		        var cell2 = row.insertCell(1);
		        var cell3 = row.insertCell(2);
		        var cell4 = row.insertCell(3);
		        var cell5 = row.insertCell(4);
		        var cell6 = row.insertCell(5);
		        cell1.innerHTML = '<input type="text" name="drugId" class="form-control">';
		        cell2.innerHTML = '<input type="text" name="drugName" class="form-control">';
		        cell3.innerHTML = '<input type="number" name="quantity" class="form-control">';
		        cell4.innerHTML = '<input type="number" step="0.01" name="price" class="form-control">';
		        cell5.innerHTML = '<input type="number" step="0.01" name="total" class="form-control" readonly>';
		        cell6.innerHTML = '<button type="button" onclick="deleteRow(this)" class="btn btn-danger"><i class="glyphicon glyphicon-trash"></i></button>';
		    }
    

	        
	        function deleteRow(btn) {
			    var row = btn.parentNode.parentNode;
			    row.parentNode.removeChild(row);
			}
			
			
			function genBill() {
			    var doc = new jsPDF();
			    
			    // Set font for the entire document
			    doc.setFont('helvetica');
			    doc.setFontType('bold');	    
			    
			    // Add a background color
			    doc.setFillColor(240, 240, 240);
			    doc.rect(0, 0, 210, 297, 'F'); // A4 size page
			
			    // Add a header with a background color
			    doc.setFillColor(100, 100, 200); // A nice blue color
			    doc.rect(0, 0, 210, 30, 'F');
			    doc.setTextColor(255, 255, 255); // White text
			    doc.text('+PharmaPlus+', 105, 20, 'center');
			
			    // Add customer details with a slight gray color
			    doc.setTextColor(50, 50, 50);
						
			    doc.text('+PharmaPlus+', 105, 20, 'center');
			
	        // Add customer details with a slight gray color
		    doc.setTextColor(50, 50, 50); // Dark gray text
		    var customerName = document.getElementById('customerName').value;
		    var customerContact = document.getElementById('customerContact').value;
		    var customerAddress = document.getElementById('customerAddress').value;
		    var customerAge = document.getElementById('customerAge').value;
		    var customerGender = document.getElementById('customerGender').value;
		
		    doc.text('Name: ' + customerName, 10, 40);
		    doc.text('Contact: ' + customerContact, 10, 50);
		    doc.text('Address: ' + customerAddress, 10, 60);
		    doc.text('Age: ' + customerAge, 10, 70);
		    doc.text('Gender: ' + customerGender, 10, 80);
		
		    // Add table headers
		    doc.setTextColor(0, 0, 0); // Black text for headers
		    doc.text('Drug ID', 10, 90);
		    doc.text('Drug Name', 40, 90);
		    doc.text('Quantity', 90, 90);
		    doc.text('Price', 130, 90);
		    doc.text('Total', 170, 90);
		
		    // Add table rows
		    var table = document.getElementById('invoiceTable');
		    var yOffset = 100;
		    for (var i = 1; i < table.rows.length; i++) {
		        var row = table.rows[i];
		        var drugId = row.cells[0].querySelector('input').value;
		        var drugName = row.cells[1].querySelector('input').value;
		        var quantity = row.cells[2].querySelector('input').value;
		        var price = row.cells[3].querySelector('input').value;
		        var total = row.cells[4].querySelector('input').value;
		
		        doc.text(drugId, 10, yOffset);
		        doc.text(drugName, 40, yOffset);
		        doc.text(quantity, 90, yOffset);
		        doc.text(price, 130, yOffset);
		        doc.text(total, 170, yOffset);
		
		        yOffset += 10; // Move to the next row
		    }
		    
		    // Add total amount
		    var totalAmount = document.getElementById('totalAmount').value; // You need to define this function
		    doc.text('Total Amount: ' + totalAmount, 10, yOffset + 10);
		    
		    // Save the PDF
		    doc.save('invoice.pdf');
			
			}

						
			        
	    </script>
	        
	             
	        
	        
	    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    
</body>
</html>
